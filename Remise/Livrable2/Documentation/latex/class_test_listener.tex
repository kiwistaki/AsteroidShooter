\hypertarget{class_test_listener}{\section{Test\-Listener Class Reference}
\label{class_test_listener}\index{Test\-Listener@{Test\-Listener}}
}


Listener for test progress and result.

Implementing the Observer pattern a \hyperlink{class_test_listener}{Test\-Listener} may be registered to a \hyperlink{class_test_result}{Test\-Result} to obtain information on the testing progress. Use specialized sub classes of \hyperlink{class_test_listener}{Test\-Listener} for text output (\hyperlink{class_text_test_progress_listener}{Text\-Test\-Progress\-Listener}). Do not use the Listener for the test result output, use a subclass of \hyperlink{class_outputter}{Outputter} instead.  




{\ttfamily \#include $<$Test\-Listener.\-h$>$}

Inheritance diagram for Test\-Listener\-:\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[height=4.000000cm]{class_test_listener}
\end{center}
\end{figure}
\subsection*{Public Member Functions}
\begin{DoxyCompactItemize}
\item 
virtual \hyperlink{class_test_listener_ae59dec3ae673618185eebf71881902e9}{$\sim$\-Test\-Listener} ()
\item 
virtual \hyperlink{wglew_8h_aeea6e3dfae3acf232096f57d2d57f084}{void} \hyperlink{class_test_listener_a5546d4420e7412234915113b1ea5ad77}{start\-Test} (\hyperlink{class_test}{Test} $\ast$)
\begin{DoxyCompactList}\small\item\em Called when just before a \hyperlink{class_test_case}{Test\-Case} is run. \end{DoxyCompactList}\item 
virtual \hyperlink{wglew_8h_aeea6e3dfae3acf232096f57d2d57f084}{void} \hyperlink{class_test_listener_a103216a5814c907f7b752b969477e765}{add\-Failure} (const \hyperlink{class_test_failure}{Test\-Failure} \&)
\begin{DoxyCompactList}\small\item\em Called when a failure occurs while running a test. \end{DoxyCompactList}\item 
virtual \hyperlink{wglew_8h_aeea6e3dfae3acf232096f57d2d57f084}{void} \hyperlink{class_test_listener_ae8ccd0f55dd9aa7eafded05ba14f9ac6}{end\-Test} (\hyperlink{class_test}{Test} $\ast$)
\begin{DoxyCompactList}\small\item\em Called just after a \hyperlink{class_test_case}{Test\-Case} was run (even if a failure occured). \end{DoxyCompactList}\item 
virtual \hyperlink{wglew_8h_aeea6e3dfae3acf232096f57d2d57f084}{void} \hyperlink{class_test_listener_a2360ebfccfa39f75bdc43948d5d1d2e7}{start\-Suite} (\hyperlink{class_test}{Test} $\ast$)
\begin{DoxyCompactList}\small\item\em Called by a \hyperlink{class_test_composite}{Test\-Composite} just before running its child tests. \end{DoxyCompactList}\item 
virtual \hyperlink{wglew_8h_aeea6e3dfae3acf232096f57d2d57f084}{void} \hyperlink{class_test_listener_ad49e5589681732a1faff8fca5cbe61f5}{end\-Suite} (\hyperlink{class_test}{Test} $\ast$)
\begin{DoxyCompactList}\small\item\em Called by a \hyperlink{class_test_composite}{Test\-Composite} after running its child tests. \end{DoxyCompactList}\item 
virtual \hyperlink{wglew_8h_aeea6e3dfae3acf232096f57d2d57f084}{void} \hyperlink{class_test_listener_a263428abdf29b2a7123af4096771925e}{start\-Test\-Run} (\hyperlink{class_test}{Test} $\ast$, \hyperlink{class_test_result}{Test\-Result} $\ast$)
\begin{DoxyCompactList}\small\item\em Called by a \hyperlink{class_test_runner}{Test\-Runner} before running the test. \end{DoxyCompactList}\item 
virtual \hyperlink{wglew_8h_aeea6e3dfae3acf232096f57d2d57f084}{void} \hyperlink{class_test_listener_a0411708032f688f6ec234bcc5e089289}{end\-Test\-Run} (\hyperlink{class_test}{Test} $\ast$, \hyperlink{class_test_result}{Test\-Result} $\ast$)
\begin{DoxyCompactList}\small\item\em Called by a \hyperlink{class_test_runner}{Test\-Runner} after running the test. \end{DoxyCompactList}\end{DoxyCompactItemize}


\subsection{Detailed Description}
Listener for test progress and result.

Implementing the Observer pattern a \hyperlink{class_test_listener}{Test\-Listener} may be registered to a \hyperlink{class_test_result}{Test\-Result} to obtain information on the testing progress. Use specialized sub classes of \hyperlink{class_test_listener}{Test\-Listener} for text output (\hyperlink{class_text_test_progress_listener}{Text\-Test\-Progress\-Listener}). Do not use the Listener for the test result output, use a subclass of \hyperlink{class_outputter}{Outputter} instead. 

The test framework distinguishes between failures and errors. A failure is anticipated and checked for with assertions. Errors are unanticipated problems signified by exceptions that are not generated by the framework.

Here is an example to track test time\-:


\begin{DoxyCode}
\textcolor{preprocessor}{#include <\hyperlink{_test_listener_8h}{cppunit/TestListener.h}>}
\textcolor{preprocessor}{#include <\hyperlink{_test_8h}{cppunit/Test.h}>}
\textcolor{preprocessor}{#include <time.h>}    \textcolor{comment}{// for clock()}

\textcolor{keyword}{class }TimingListener : \textcolor{keyword}{public} CppUnit::TestListener
\{
\textcolor{keyword}{public}:
  \textcolor{keywordtype}{void} \hyperlink{class_test_listener_a5546d4420e7412234915113b1ea5ad77}{startTest}( CppUnit::Test *test )
  \{
    \_chronometer.start();
  \}
 
  \textcolor{keywordtype}{void} \hyperlink{class_test_listener_ae8ccd0f55dd9aa7eafded05ba14f9ac6}{endTest}( CppUnit::Test *test )
  \{
    \_chronometer.end();
    addTest( test, \_chronometer.elapsedTime() );
  \}

  \textcolor{comment}{// ... (interface to add/read test timing result)}

\textcolor{keyword}{private}:
  Clock \_chronometer;
\};
\end{DoxyCode}


And another example that track failure/success at test suite level and captures the \hyperlink{class_test_path}{Test\-Path} of each suite\-: 
\begin{DoxyCode}
\textcolor{keyword}{class }SuiteTracker : \textcolor{keyword}{public} CppUnit::TestListener
\{
\textcolor{keyword}{public}:
  \textcolor{keywordtype}{void} \hyperlink{class_test_listener_a2360ebfccfa39f75bdc43948d5d1d2e7}{startSuite}( CppUnit::Test *suite )
  \{
    m\_currentPath.add( suite );
  \}
  
  \textcolor{keywordtype}{void} \hyperlink{class_test_listener_a103216a5814c907f7b752b969477e765}{addFailure}( \textcolor{keyword}{const} \hyperlink{class_test_failure}{TestFailure} &failure )
  \{
    m\_suiteFailure.top() = \textcolor{keyword}{false};
  \}

  \textcolor{keywordtype}{void} \hyperlink{class_test_listener_ad49e5589681732a1faff8fca5cbe61f5}{endSuite}( CppUnit::Test *suite )
  \{
    m\_suiteStatus.insert( std::make\_pair( suite, m\_suiteFailure.top() ) );
    m\_suitePaths.insert( std::make\_pair( suite, m\_currentPath ) );

    m\_currentPath.up();
    m\_suiteFailure.pop();
  \}

\textcolor{keyword}{private}:
  std::stack<bool> m\_suiteFailure;
  CppUnit::TestPath m\_currentPath;
  std::map<CppUnit::Test *, bool> m\_suiteStatus;
  std::map<CppUnit::Test *, CppUnit::TestPath> m\_suitePaths;
\};
\end{DoxyCode}


\begin{DoxySeeAlso}{See Also}
\hyperlink{class_test_result}{Test\-Result} 
\end{DoxySeeAlso}


\subsection{Constructor \& Destructor Documentation}
\hypertarget{class_test_listener_ae59dec3ae673618185eebf71881902e9}{\index{Test\-Listener@{Test\-Listener}!$\sim$\-Test\-Listener@{$\sim$\-Test\-Listener}}
\index{$\sim$\-Test\-Listener@{$\sim$\-Test\-Listener}!TestListener@{Test\-Listener}}
\subsubsection[{$\sim$\-Test\-Listener}]{\setlength{\rightskip}{0pt plus 5cm}virtual Test\-Listener\-::$\sim$\-Test\-Listener (
\begin{DoxyParamCaption}
{}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [inline]}, {\ttfamily [virtual]}}}\label{class_test_listener_ae59dec3ae673618185eebf71881902e9}


\subsection{Member Function Documentation}
\hypertarget{class_test_listener_a103216a5814c907f7b752b969477e765}{\index{Test\-Listener@{Test\-Listener}!add\-Failure@{add\-Failure}}
\index{add\-Failure@{add\-Failure}!TestListener@{Test\-Listener}}
\subsubsection[{add\-Failure}]{\setlength{\rightskip}{0pt plus 5cm}virtual {\bf void} Test\-Listener\-::add\-Failure (
\begin{DoxyParamCaption}
\item[{const {\bf Test\-Failure} \&}]{}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [inline]}, {\ttfamily [virtual]}}}\label{class_test_listener_a103216a5814c907f7b752b969477e765}


Called when a failure occurs while running a test. 

\begin{DoxySeeAlso}{See Also}
\hyperlink{class_test_failure}{Test\-Failure}. 
\end{DoxySeeAlso}
\begin{DoxyWarning}{Warning}
{\itshape failure} is a temporary object that is destroyed after the method call. Use \hyperlink{class_test_failure_a0f0c86f12431ea8adde3e70e0cb52db7}{Test\-Failure\-::clone()} to create a duplicate. 
\end{DoxyWarning}


Reimplemented in \hyperlink{class_test_result_collector_af53cbc55621f0eb0dc02d8b0203ea321}{Test\-Result\-Collector}, \hyperlink{class_test_success_listener_a912bb5ea408b2be5b39cfb45e1bb402f}{Test\-Success\-Listener}, \hyperlink{class_text_test_progress_listener_a66f5a921e6e3ceecc8a286df7b60abcf}{Text\-Test\-Progress\-Listener}, \hyperlink{class_text_test_result_a05d3b0e8e51b3430092166bbc3d17708}{Text\-Test\-Result}, and \hyperlink{class_brief_test_progress_listener_a21f8658a9c19c67220241656cfad30ce}{Brief\-Test\-Progress\-Listener}.

\hypertarget{class_test_listener_ad49e5589681732a1faff8fca5cbe61f5}{\index{Test\-Listener@{Test\-Listener}!end\-Suite@{end\-Suite}}
\index{end\-Suite@{end\-Suite}!TestListener@{Test\-Listener}}
\subsubsection[{end\-Suite}]{\setlength{\rightskip}{0pt plus 5cm}virtual {\bf void} Test\-Listener\-::end\-Suite (
\begin{DoxyParamCaption}
\item[{{\bf Test} $\ast$}]{}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [inline]}, {\ttfamily [virtual]}}}\label{class_test_listener_ad49e5589681732a1faff8fca5cbe61f5}


Called by a \hyperlink{class_test_composite}{Test\-Composite} after running its child tests. 

\hypertarget{class_test_listener_ae8ccd0f55dd9aa7eafded05ba14f9ac6}{\index{Test\-Listener@{Test\-Listener}!end\-Test@{end\-Test}}
\index{end\-Test@{end\-Test}!TestListener@{Test\-Listener}}
\subsubsection[{end\-Test}]{\setlength{\rightskip}{0pt plus 5cm}virtual {\bf void} Test\-Listener\-::end\-Test (
\begin{DoxyParamCaption}
\item[{{\bf Test} $\ast$}]{}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [inline]}, {\ttfamily [virtual]}}}\label{class_test_listener_ae8ccd0f55dd9aa7eafded05ba14f9ac6}


Called just after a \hyperlink{class_test_case}{Test\-Case} was run (even if a failure occured). 



Reimplemented in \hyperlink{class_brief_test_progress_listener_a49cbd9152ea35a21f6525773660ee119}{Brief\-Test\-Progress\-Listener}.

\hypertarget{class_test_listener_a0411708032f688f6ec234bcc5e089289}{\index{Test\-Listener@{Test\-Listener}!end\-Test\-Run@{end\-Test\-Run}}
\index{end\-Test\-Run@{end\-Test\-Run}!TestListener@{Test\-Listener}}
\subsubsection[{end\-Test\-Run}]{\setlength{\rightskip}{0pt plus 5cm}virtual {\bf void} Test\-Listener\-::end\-Test\-Run (
\begin{DoxyParamCaption}
\item[{{\bf Test} $\ast$}]{, }
\item[{{\bf Test\-Result} $\ast$}]{}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [inline]}, {\ttfamily [virtual]}}}\label{class_test_listener_a0411708032f688f6ec234bcc5e089289}


Called by a \hyperlink{class_test_runner}{Test\-Runner} after running the test. 

\hyperlink{class_text_test_progress_listener}{Text\-Test\-Progress\-Listener} use this to emit a line break. You can also use this to do some global uninitialisation.


\begin{DoxyParams}{Parameters}
{\em test} & \hyperlink{class_test}{Test} that was run. \\
\hline
{\em event\-Manager} & Event manager used for the test run. \\
\hline
\end{DoxyParams}


Reimplemented in \hyperlink{class_text_test_progress_listener_a12df92f16f1e2b9d571fd064fb7f30bd}{Text\-Test\-Progress\-Listener}.

\hypertarget{class_test_listener_a2360ebfccfa39f75bdc43948d5d1d2e7}{\index{Test\-Listener@{Test\-Listener}!start\-Suite@{start\-Suite}}
\index{start\-Suite@{start\-Suite}!TestListener@{Test\-Listener}}
\subsubsection[{start\-Suite}]{\setlength{\rightskip}{0pt plus 5cm}virtual {\bf void} Test\-Listener\-::start\-Suite (
\begin{DoxyParamCaption}
\item[{{\bf Test} $\ast$}]{}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [inline]}, {\ttfamily [virtual]}}}\label{class_test_listener_a2360ebfccfa39f75bdc43948d5d1d2e7}


Called by a \hyperlink{class_test_composite}{Test\-Composite} just before running its child tests. 

\hypertarget{class_test_listener_a5546d4420e7412234915113b1ea5ad77}{\index{Test\-Listener@{Test\-Listener}!start\-Test@{start\-Test}}
\index{start\-Test@{start\-Test}!TestListener@{Test\-Listener}}
\subsubsection[{start\-Test}]{\setlength{\rightskip}{0pt plus 5cm}virtual {\bf void} Test\-Listener\-::start\-Test (
\begin{DoxyParamCaption}
\item[{{\bf Test} $\ast$}]{}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [inline]}, {\ttfamily [virtual]}}}\label{class_test_listener_a5546d4420e7412234915113b1ea5ad77}


Called when just before a \hyperlink{class_test_case}{Test\-Case} is run. 



Reimplemented in \hyperlink{class_test_result_collector_a647d3e05ffc8fcf7023fea2f7c9f95cb}{Test\-Result\-Collector}, \hyperlink{class_text_test_result_a2191f5e916fca83151fb657b31dcd30d}{Text\-Test\-Result}, \hyperlink{class_text_test_progress_listener_ae5089aa6b0bcae0128604691f23ed224}{Text\-Test\-Progress\-Listener}, and \hyperlink{class_brief_test_progress_listener_ab4196e15752bb2be443e72418500e20e}{Brief\-Test\-Progress\-Listener}.

\hypertarget{class_test_listener_a263428abdf29b2a7123af4096771925e}{\index{Test\-Listener@{Test\-Listener}!start\-Test\-Run@{start\-Test\-Run}}
\index{start\-Test\-Run@{start\-Test\-Run}!TestListener@{Test\-Listener}}
\subsubsection[{start\-Test\-Run}]{\setlength{\rightskip}{0pt plus 5cm}virtual {\bf void} Test\-Listener\-::start\-Test\-Run (
\begin{DoxyParamCaption}
\item[{{\bf Test} $\ast$}]{, }
\item[{{\bf Test\-Result} $\ast$}]{}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [inline]}, {\ttfamily [virtual]}}}\label{class_test_listener_a263428abdf29b2a7123af4096771925e}


Called by a \hyperlink{class_test_runner}{Test\-Runner} before running the test. 

You can use this to do some global initialisation. A listener could also use to output a 'prolog' to the test run.


\begin{DoxyParams}{Parameters}
{\em test} & \hyperlink{class_test}{Test} that is going to be run. \\
\hline
{\em event\-Manager} & Event manager used for the test run. \\
\hline
\end{DoxyParams}


The documentation for this class was generated from the following file\-:\begin{DoxyCompactItemize}
\item 
Cadriciel/\-Commun/\-Externe/cppunit/include/cppunit/\hyperlink{_test_listener_8h}{Test\-Listener.\-h}\end{DoxyCompactItemize}
